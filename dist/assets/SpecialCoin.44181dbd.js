var wt=Object.defineProperty,pt=Object.defineProperties;var xt=Object.getOwnPropertyDescriptors;var Fe=Object.getOwnPropertySymbols;var qt=Object.prototype.hasOwnProperty,Tt=Object.prototype.propertyIsEnumerable;var Ne=(a,i,u)=>i in a?wt(a,i,{enumerable:!0,configurable:!0,writable:!0,value:u}):a[i]=u,h=(a,i)=>{for(var u in i||(i={}))qt.call(i,u)&&Ne(a,u,i[u]);if(Fe)for(var u of Fe(i))Tt.call(i,u)&&Ne(a,u,i[u]);return a},R=(a,i)=>pt(a,xt(i));import{a0 as z,a1 as St,c as Se,u as Ze,a as Xe,a2 as Yt,Z as At,a3 as We,a4 as Gt,a5 as Ht,a6 as pe,i as Ke,z as G,_ as et,a7 as ne,p as Vt,a8 as Et,a9 as Bt,B as Rt}from"./index.adf72ee2.js";import{b as d,r as Y,f as $,h as s,T as N,g as Ye,t as ze,x as qe,I as Te,A as W,p as q,z as F,w as tt,M as at,D as Ue,R as It,N as Ot}from"./quasar.b7e1cbae.js";import{b as Pt,n as Lt,c as jt,a as Qt,Q as $t}from"./QInput.9b86dbd3.js";import{u as Ft,b as Nt,c as Wt,d as zt}from"./QSelect.07adb0bf.js";import{T as Ut}from"./Table.165c3906.js";function Jt(){const a=new Map;return{getCache:function(i,u){return a[i]===void 0?a[i]=u:a[i]},getCacheWithFn:function(i,u){return a[i]===void 0?a[i]=u():a[i]}}}const Zt=["gregorian","persian"],Xt={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:a=>Zt.includes(a),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Kt=["update:modelValue"];function O(a){return a.year+"/"+z(a.month)+"/"+z(a.day)}function ea(a,i){const u=d(()=>a.disable!==!0&&a.readonly!==!0),M=d(()=>a.editable===!0?0:-1),k=d(()=>{const g=[];return a.color!==void 0&&g.push(`bg-${a.color}`),a.textColor!==void 0&&g.push(`text-${a.textColor}`),g.join(" ")});function m(){return a.locale!==void 0?h(h({},i.lang.date),a.locale):i.lang.date}function f(g){const D=new Date,V=g===!0?null:0;if(a.calendar==="persian"){const H=St(D);return{year:H.jy,month:H.jm,day:H.jd}}return{year:D.getFullYear(),month:D.getMonth()+1,day:D.getDate(),hour:V,minute:V,second:V,millisecond:V}}return{editable:u,tabindex:M,headerClass:k,getLocale:m,getCurrentDate:f}}const Q=20,ta=["Calendar","Years","Months"],Je=a=>ta.includes(a),xe=a=>/^-?[\d]+\/[0-1]\d$/.test(a),K=" \u2014 ";function P(a){return a.year+"/"+z(a.month)}var aa=Se({name:"QDate",props:R(h(h(h({},Xt),Pt),Ze),{multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:xe},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:xe},navigationMaxYearMonth:{type:String,validator:xe},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:Je}}),emits:[...Kt,"range-start","range-end","navigation"],setup(a,{slots:i,emit:u}){const{proxy:M}=Ye(),{$q:k}=M,m=Xe(a,k),{getCache:f}=Jt(),{tabindex:g,headerClass:D,getLocale:V,getCurrentDate:H}=ea(a,k);let E;const de=Lt(a),ve=jt(de),ee=Y(null),C=Y(Ie()),_=Y(V()),nt=d(()=>Ie()),ot=d(()=>V()),B=d(()=>H()),c=Y(Oe(C.value,_.value)),T=Y(a.defaultView),Ae=k.lang.rtl===!0?"right":"left",oe=Y(Ae.value),me=Y(Ae.value),he=c.value.year,le=Y(he-he%Q-(he<0?Q:0)),w=Y(null),lt=d(()=>{const e=a.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${a.minimal===!0?"minimal":"standard"}`+(m.value===!0?" q-date--dark q-dark":"")+(a.bordered===!0?" q-date--bordered":"")+(a.square===!0?" q-date--square no-border-radius":"")+(a.flat===!0?" q-date--flat no-shadow":"")+(a.disable===!0?" disabled":a.readonly===!0?" q-date--readonly":"")}),L=d(()=>a.color||"primary"),U=d(()=>a.textColor||"white"),re=d(()=>a.emitImmediately===!0&&a.multiple!==!0&&a.range!==!0),fe=d(()=>Array.isArray(a.modelValue)===!0?a.modelValue:a.modelValue!==null&&a.modelValue!==void 0?[a.modelValue]:[]),A=d(()=>fe.value.filter(e=>typeof e=="string").map(e=>_e(e,C.value,_.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),J=d(()=>{const e=t=>_e(t,C.value,_.value);return fe.value.filter(t=>At(t)===!0&&t.from!==void 0&&t.to!==void 0).map(t=>({from:e(t.from),to:e(t.to)})).filter(t=>t.from.dateHash!==null&&t.to.dateHash!==null&&t.from.dateHash<t.to.dateHash)}),ie=d(()=>a.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const t=We(e.year,e.month,e.day);return new Date(t.gy,t.gm-1,t.gd)}),ge=d(()=>a.calendar==="persian"?O:(e,t,n)=>Gt(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),t===void 0?C.value:t,n===void 0?_.value:n,e.year,e.timezoneOffset)),te=d(()=>A.value.length+J.value.reduce((e,t)=>e+1+Ht(ie.value(t.to),ie.value(t.from)),0)),Ge=d(()=>{if(a.title!==void 0&&a.title!==null&&a.title.length>0)return a.title;if(w.value!==null){const n=w.value.init,l=ie.value(n);return _.value.daysShort[l.getDay()]+", "+_.value.monthsShort[n.month-1]+" "+n.day+K+"?"}if(te.value===0)return K;if(te.value>1)return`${te.value} ${_.value.pluralDay}`;const e=A.value[0],t=ie.value(e);return isNaN(t.valueOf())===!0?K:_.value.headerTitle!==void 0?_.value.headerTitle(t,e):_.value.daysShort[t.getDay()]+", "+_.value.monthsShort[e.month-1]+" "+e.day}),rt=d(()=>A.value.concat(J.value.map(t=>t.from)).sort((t,n)=>t.year-n.year||t.month-n.month)[0]),it=d(()=>A.value.concat(J.value.map(t=>t.to)).sort((t,n)=>n.year-t.year||n.month-t.month)[0]),He=d(()=>{if(a.subtitle!==void 0&&a.subtitle!==null&&a.subtitle.length>0)return a.subtitle;if(te.value===0)return K;if(te.value>1){const e=rt.value,t=it.value,n=_.value.monthsShort;return n[e.month-1]+(e.year!==t.year?" "+e.year+K+n[t.month-1]+" ":e.month!==t.month?K+n[t.month-1]:"")+" "+t.year}return A.value[0].year}),se=d(()=>{const e=[k.iconSet.datetime.arrowLeft,k.iconSet.datetime.arrowRight];return k.lang.rtl===!0?e.reverse():e}),Ve=d(()=>a.firstDayOfWeek!==void 0?Number(a.firstDayOfWeek):_.value.firstDayOfWeek),st=d(()=>{const e=_.value.daysShort,t=Ve.value;return t>0?e.slice(t,7).concat(e.slice(0,t)):e}),I=d(()=>{const e=c.value;return a.calendar!=="persian"?new Date(e.year,e.month,0).getDate():pe(e.year,e.month)}),ut=d(()=>typeof a.eventColor=="function"?a.eventColor:()=>a.eventColor),p=d(()=>{if(a.navigationMinYearMonth===void 0)return null;const e=a.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),x=d(()=>{if(a.navigationMaxYearMonth===void 0)return null;const e=a.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),ye=d(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return p.value!==null&&p.value.year>=c.value.year&&(e.year.prev=!1,p.value.year===c.value.year&&p.value.month>=c.value.month&&(e.month.prev=!1)),x.value!==null&&x.value.year<=c.value.year&&(e.year.next=!1,x.value.year===c.value.year&&x.value.month<=c.value.month&&(e.month.next=!1)),e}),ue=d(()=>{const e={};return A.value.forEach(t=>{const n=P(t);e[n]===void 0&&(e[n]=[]),e[n].push(t.day)}),e}),Ee=d(()=>{const e={};return J.value.forEach(t=>{const n=P(t.from),l=P(t.to);if(e[n]===void 0&&(e[n]=[]),e[n].push({from:t.from.day,to:n===l?t.to.day:void 0,range:t}),n<l){let o;const{year:y,month:r}=t.from,v=r<12?{year:y,month:r+1}:{year:y+1,month:1};for(;(o=P(v))<=l;)e[o]===void 0&&(e[o]=[]),e[o].push({from:void 0,to:o===l?t.to.day:void 0,range:t}),v.month++,v.month>12&&(v.year++,v.month=1)}}),e}),ae=d(()=>{if(w.value===null)return;const{init:e,initHash:t,final:n,finalHash:l}=w.value,[o,y]=t<=l?[e,n]:[n,e],r=P(o),v=P(y);if(r!==S.value&&v!==S.value)return;const b={};return r===S.value?(b.from=o.day,b.includeFrom=!0):b.from=1,v===S.value?(b.to=y.day,b.includeTo=!0):b.to=I.value,b}),S=d(()=>P(c.value)),ct=d(()=>{const e={};if(a.options===void 0){for(let n=1;n<=I.value;n++)e[n]=!0;return e}const t=typeof a.options=="function"?a.options:n=>a.options.includes(n);for(let n=1;n<=I.value;n++){const l=S.value+"/"+z(n);e[n]=t(l)}return e}),dt=d(()=>{const e={};if(a.events===void 0)for(let t=1;t<=I.value;t++)e[t]=!1;else{const t=typeof a.events=="function"?a.events:n=>a.events.includes(n);for(let n=1;n<=I.value;n++){const l=S.value+"/"+z(n);e[n]=t(l)===!0&&ut.value(l)}}return e}),vt=d(()=>{let e,t;const{year:n,month:l}=c.value;if(a.calendar!=="persian")e=new Date(n,l-1,1),t=new Date(n,l-1,0).getDate();else{const o=We(n,l,1);e=new Date(o.gy,o.gm-1,o.gd);let y=l-1,r=n;y===0&&(y=12,r--),t=pe(r,y)}return{days:e.getDay()-Ve.value-1,endDay:t}}),Be=d(()=>{const e=[],{days:t,endDay:n}=vt.value,l=t<0?t+7:t;if(l<6)for(let r=n-l;r<=n;r++)e.push({i:r,fill:!0});const o=e.length;for(let r=1;r<=I.value;r++){const v={i:r,event:dt.value[r],classes:[]};ct.value[r]===!0&&(v.in=!0,v.flat=!0),e.push(v)}if(ue.value[S.value]!==void 0&&ue.value[S.value].forEach(r=>{const v=o+r-1;Object.assign(e[v],{selected:!0,unelevated:!0,flat:!1,color:L.value,textColor:U.value})}),Ee.value[S.value]!==void 0&&Ee.value[S.value].forEach(r=>{if(r.from!==void 0){const v=o+r.from-1,b=o+(r.to||I.value)-1;for(let we=v;we<=b;we++)Object.assign(e[we],{range:r.range,unelevated:!0,color:L.value,textColor:U.value});Object.assign(e[v],{rangeFrom:!0,flat:!1}),r.to!==void 0&&Object.assign(e[b],{rangeTo:!0,flat:!1})}else if(r.to!==void 0){const v=o+r.to-1;for(let b=o;b<=v;b++)Object.assign(e[b],{range:r.range,unelevated:!0,color:L.value,textColor:U.value});Object.assign(e[v],{flat:!1,rangeTo:!0})}else{const v=o+I.value-1;for(let b=o;b<=v;b++)Object.assign(e[b],{range:r.range,unelevated:!0,color:L.value,textColor:U.value})}}),ae.value!==void 0){const r=o+ae.value.from-1,v=o+ae.value.to-1;for(let b=r;b<=v;b++)e[b].color=L.value,e[b].editRange=!0;ae.value.includeFrom===!0&&(e[r].editRangeFrom=!0),ae.value.includeTo===!0&&(e[v].editRangeTo=!0)}c.value.year===B.value.year&&c.value.month===B.value.month&&(e[o+B.value.day-1].today=!0);const y=e.length%7;if(y>0){const r=7-y;for(let v=1;v<=r;v++)e.push({i:v,fill:!0})}return e.forEach(r=>{let v="q-date__calendar-item ";r.fill===!0?v+="q-date__calendar-item--fill":(v+=`q-date__calendar-item--${r.in===!0?"in":"out"}`,r.range!==void 0&&(v+=` q-date__range${r.rangeTo===!0?"-to":r.rangeFrom===!0?"-from":""}`),r.editRange===!0&&(v+=` q-date__edit-range${r.editRangeFrom===!0?"-from":""}${r.editRangeTo===!0?"-to":""}`),(r.range!==void 0||r.editRange===!0)&&(v+=` text-${r.color}`)),r.classes=v}),e}),mt=d(()=>a.disable===!0?{"aria-disabled":"true"}:a.readonly===!0?{"aria-readonly":"true"}:{});$(()=>a.modelValue,e=>{if(E===e)E=0;else{const{year:t,month:n}=Oe(C.value,_.value);Z(t,n)}}),$(T,()=>{ee.value!==null&&ee.value.focus()}),$(()=>c.value.year,e=>{u("navigation",{year:e,month:c.value.month})}),$(()=>c.value.month,e=>{u("navigation",{year:c.value.year,month:e})}),$(nt,e=>{$e(e,_.value,"mask"),C.value=e}),$(ot,e=>{$e(C.value,e,"locale"),_.value=e});function Re(){const e=B.value,t=ue.value[P(e)];(t===void 0||t.includes(e.day)===!1)&&ke(e),Ce(e.year,e.month)}function ht(e){Je(e)===!0&&(T.value=e)}function ft(e,t){["month","year"].includes(e)&&(e==="month"?Le:be)(t===!0?-1:1)}function Ce(e,t){T.value="Calendar",Z(e,t)}function gt(e,t){if(a.range===!1||!e){w.value=null;return}const n=Object.assign(h({},c.value),e),l=t!==void 0?Object.assign(h({},c.value),t):n;w.value={init:n,initHash:O(n),final:l,finalHash:O(l)},Ce(n.year,n.month)}function Ie(){return a.calendar==="persian"?"YYYY/MM/DD":a.mask}function _e(e,t,n){return Yt(e,t,n,a.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Oe(e,t){const n=Array.isArray(a.modelValue)===!0?a.modelValue:a.modelValue?[a.modelValue]:[];if(n.length===0)return Pe();const l=n[n.length-1],o=_e(l.from!==void 0?l.from:l,e,t);return o.dateHash===null?Pe():o}function Pe(){let e,t;if(a.defaultYearMonth!==void 0){const n=a.defaultYearMonth.split("/");e=parseInt(n[0],10),t=parseInt(n[1],10)}else{const n=B.value!==void 0?B.value:H();e=n.year,t=n.month}return{year:e,month:t,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+z(t)+"/01"}}function Le(e){let t=c.value.year,n=Number(c.value.month)+e;n===13?(n=1,t++):n===0&&(n=12,t--),Z(t,n),re.value===!0&&ce("month")}function be(e){const t=Number(c.value.year)+e;Z(t,c.value.month),re.value===!0&&ce("year")}function yt(e){Z(e,c.value.month),T.value=a.defaultView==="Years"?"Months":"Calendar",re.value===!0&&ce("year")}function Ct(e){Z(c.value.year,e),T.value="Calendar",re.value===!0&&ce("month")}function _t(e,t){const n=ue.value[t];(n!==void 0&&n.includes(e.day)===!0?De:ke)(e)}function j(e){return{year:e.year,month:e.month,day:e.day}}function Z(e,t){p.value!==null&&e<=p.value.year&&(e=p.value.year,t<p.value.month&&(t=p.value.month)),x.value!==null&&e>=x.value.year&&(e=x.value.year,t>x.value.month&&(t=x.value.month));const n=e+"/"+z(t)+"/01";n!==c.value.dateHash&&(oe.value=c.value.dateHash<n==(k.lang.rtl!==!0)?"left":"right",e!==c.value.year&&(me.value=oe.value),ze(()=>{le.value=e-e%Q-(e<0?Q:0),Object.assign(c.value,{year:e,month:t,day:1,dateHash:n})}))}function je(e,t,n){const l=e!==null&&e.length===1&&a.multiple===!1?e[0]:e;E=l;const{reason:o,details:y}=Qe(t,n);u("update:modelValue",l,o,y)}function ce(e){const t=A.value[0]!==void 0&&A.value[0].dateHash!==null?h({},A.value[0]):h({},c.value);ze(()=>{t.year=c.value.year,t.month=c.value.month;const n=a.calendar!=="persian"?new Date(t.year,t.month,0).getDate():pe(t.year,t.month);t.day=Math.min(Math.max(1,t.day),n);const l=X(t);E=l;const{details:o}=Qe("",t);u("update:modelValue",l,e,o)})}function Qe(e,t){return t.from!==void 0?{reason:`${e}-range`,details:R(h({},j(t.target)),{from:j(t.from),to:j(t.to)})}:{reason:`${e}-day`,details:j(t)}}function X(e,t,n){return e.from!==void 0?{from:ge.value(e.from,t,n),to:ge.value(e.to,t,n)}:ge.value(e,t,n)}function ke(e){let t;if(a.multiple===!0)if(e.from!==void 0){const n=O(e.from),l=O(e.to),o=A.value.filter(r=>r.dateHash<n||r.dateHash>l),y=J.value.filter(({from:r,to:v})=>v.dateHash<n||r.dateHash>l);t=o.concat(y).concat(e).map(r=>X(r))}else{const n=fe.value.slice();n.push(X(e)),t=n}else t=X(e);je(t,"add",e)}function De(e){if(a.noUnset===!0)return;let t=null;if(a.multiple===!0&&Array.isArray(a.modelValue)===!0){const n=X(e);e.from!==void 0?t=a.modelValue.filter(l=>l.from!==void 0?l.from!==n.from&&l.to!==n.to:!0):t=a.modelValue.filter(l=>l!==n),t.length===0&&(t=null)}je(t,"remove",e)}function $e(e,t,n){const l=A.value.concat(J.value).map(o=>X(o,e,t)).filter(o=>o.from!==void 0?o.from.dateHash!==null&&o.to.dateHash!==null:o.dateHash!==null);u("update:modelValue",(a.multiple===!0?l:l[0])||null,n)}Object.assign(M,{setToday:Re,setView:ht,offsetCalendar:ft,setCalendarTo:Ce,setEditingRange:gt});function bt(){if(a.minimal!==!0)return s("div",{class:"q-date__header "+D.value},[s("div",{class:"relative-position"},[s(N,{name:"q-transition--fade"},()=>s("div",h({key:"h-yr-"+He.value,class:"q-date__header-subtitle q-date__header-link "+(T.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value},f("vY",{onClick(){T.value="Years"},onKeyup(e){e.keyCode===13&&(T.value="Years")}})),[He.value]))]),s("div",{class:"q-date__header-title relative-position flex no-wrap"},[s("div",{class:"relative-position col"},[s(N,{name:"q-transition--fade"},()=>s("div",h({key:"h-sub"+Ge.value,class:"q-date__header-title-label q-date__header-link "+(T.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:g.value},f("vC",{onClick(){T.value="Calendar"},onKeyup(e){e.keyCode===13&&(T.value="Calendar")}})),[Ge.value]))]),a.todayBtn===!0?s(G,{class:"q-date__header-today self-start",icon:k.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:g.value,onClick:Re}):null])])}function Me({label:e,type:t,key:n,dir:l,goTo:o,boundaries:y,cls:r}){return[s("div",{class:"row items-center q-date__arrow"},[s(G,h({round:!0,dense:!0,size:"sm",flat:!0,icon:se.value[0],tabindex:g.value,disable:y.prev===!1},f("go-#"+t,{onClick(){o(-1)}})))]),s("div",{class:"relative-position overflow-hidden flex flex-center"+r},[s(N,{name:"q-transition--jump-"+l},()=>s("div",{key:n},[s(G,h({flat:!0,dense:!0,noCaps:!0,label:e,tabindex:g.value},f("view#"+t,{onClick:()=>{T.value=t}})))]))]),s("div",{class:"row items-center q-date__arrow"},[s(G,h({round:!0,dense:!0,size:"sm",flat:!0,icon:se.value[1],tabindex:g.value,disable:y.next===!1},f("go+#"+t,{onClick(){o(1)}})))])]}const kt={Calendar:()=>[s("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[s("div",{class:"q-date__navigation row items-center no-wrap"},Me({label:_.value.months[c.value.month-1],type:"Months",key:c.value.month,dir:oe.value,goTo:Le,boundaries:ye.value.month,cls:" col"}).concat(Me({label:c.value.year,type:"Years",key:c.value.year,dir:me.value,goTo:be,boundaries:ye.value.year,cls:""}))),s("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},st.value.map(e=>s("div",{class:"q-date__calendar-item"},[s("div",e)]))),s("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[s(N,{name:"q-transition--slide-"+oe.value},()=>s("div",{key:S.value,class:"q-date__calendar-days fit"},Be.value.map(e=>s("div",{class:e.classes},[e.in===!0?s(G,h({class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:g.value},f("day#"+e.i,{onClick:()=>{Dt(e.i)},onMouseover:()=>{Mt(e.i)}})),e.event!==!1?()=>s("div",{class:"q-date__event bg-"+e.event}):null):s("div",""+e.i)]))))])])],Months(){const e=c.value.year===B.value.year,t=l=>p.value!==null&&c.value.year===p.value.year&&p.value.month>l||x.value!==null&&c.value.year===x.value.year&&x.value.month<l,n=_.value.monthsShort.map((l,o)=>{const y=c.value.month===o+1;return s("div",{class:"q-date__months-item flex flex-center"},[s(G,h({class:e===!0&&B.value.month===o+1?"q-date__today":null,flat:y!==!0,label:l,unelevated:y,color:y===!0?L.value:null,textColor:y===!0?U.value:null,tabindex:g.value,disable:t(o+1)},f("month#"+o,{onClick:()=>{Ct(o+1)}})))])});return a.yearsInMonthView===!0&&n.unshift(s("div",{class:"row no-wrap full-width"},[Me({label:c.value.year,type:"Years",key:c.value.year,dir:me.value,goTo:be,boundaries:ye.value.year,cls:" col"})])),s("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},n)},Years(){const e=le.value,t=e+Q,n=[],l=o=>p.value!==null&&p.value.year>o||x.value!==null&&x.value.year<o;for(let o=e;o<=t;o++){const y=c.value.year===o;n.push(s("div",{class:"q-date__years-item flex flex-center"},[s(G,h({key:"yr"+o,class:B.value.year===o?"q-date__today":null,flat:!y,label:o,dense:!0,unelevated:y,color:y===!0?L.value:null,textColor:y===!0?U.value:null,tabindex:g.value,disable:l(o)},f("yr#"+o,{onClick:()=>{yt(o)}})))]))}return s("div",{class:"q-date__view q-date__years flex flex-center"},[s("div",{class:"col-auto"},[s(G,h({round:!0,dense:!0,flat:!0,icon:se.value[0],tabindex:g.value,disable:l(e)},f("y-",{onClick:()=>{le.value-=Q}})))]),s("div",{class:"q-date__years-content col self-stretch row items-center"},n),s("div",{class:"col-auto"},[s(G,h({round:!0,dense:!0,flat:!0,icon:se.value[1],tabindex:g.value,disable:l(t)},f("y+",{onClick:()=>{le.value+=Q}})))])])}};function Dt(e){const t=R(h({},c.value),{day:e});if(a.range===!1){_t(t,S.value);return}if(w.value===null){const n=Be.value.find(o=>o.fill!==!0&&o.i===e);if(a.noUnset!==!0&&n.range!==void 0){De({target:t,from:n.range.from,to:n.range.to});return}if(n.selected===!0){De(t);return}const l=O(t);w.value={init:t,initHash:l,final:t,finalHash:l},u("range-start",j(t))}else{const n=w.value.initHash,l=O(t),o=n<=l?{from:w.value.init,to:t}:{from:t,to:w.value.init};w.value=null,ke(n===l?t:h({target:t},o)),u("range-end",{from:j(o.from),to:j(o.to)})}}function Mt(e){if(w.value!==null){const t=R(h({},c.value),{day:e});Object.assign(w.value,{final:t,finalHash:O(t)})}}return()=>{const e=[s("div",{class:"q-date__content col relative-position"},[s(N,{name:"q-transition--fade"},kt[T.value])])],t=Ke(i.default);return t!==void 0&&e.push(s("div",{class:"q-date__actions"},t)),a.name!==void 0&&a.disable!==!0&&ve(e,"push"),s("div",h({class:lt.value},mt.value),[bt(),s("div",{ref:ee,class:"q-date__main col column",tabindex:-1},e)])}}}),na=Se({name:"QPopupProxy",props:R(h({},Ft),{breakpoint:{type:[String,Number],default:450}}),emits:["show","hide"],setup(a,{slots:i,emit:u,attrs:M}){const{proxy:k}=Ye(),{$q:m}=k,f=Y(!1),g=Y(null),D=d(()=>parseInt(a.breakpoint,10)),{canShow:V}=Nt({showing:f});function H(){return m.screen.width<D.value||m.screen.height<D.value?"dialog":"menu"}const E=Y(H()),de=d(()=>E.value==="menu"?{maxHeight:"99vh"}:{});$(()=>H(),C=>{f.value!==!0&&(E.value=C)}),Object.assign(k,{show(C){V(C)===!0&&g.value.show(C)},hide(C){g.value.hide(C)},toggle(C){g.value.toggle(C)}});function ve(C){f.value=!0,u("show",C)}function ee(C){f.value=!1,E.value=H(),u("hide",C)}return()=>{const C=R(h(h({ref:g},de.value),M),{onShow:ve,onHide:ee});let _;return E.value==="dialog"?_=Wt:(_=zt,Object.assign(C,{target:a.target,contextMenu:a.contextMenu,noParentEvent:!0,separateClosePopup:!0})),s(_,C,i.default)}}});const oa=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],la=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var ra=Se({name:"QSkeleton",props:R(h({},Ze),{tag:{type:String,default:"div"},type:{type:String,validator:a=>oa.includes(a),default:"rect"},animation:{type:String,validator:a=>la.includes(a),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String}),setup(a,{slots:i}){const u=Ye(),M=Xe(a,u.proxy.$q),k=d(()=>{const f=a.size!==void 0?[a.size,a.size]:[a.width,a.height];return{"--q-skeleton-speed":`${a.animationSpeed}ms`,width:f[0],height:f[1]}}),m=d(()=>`q-skeleton q-skeleton--${M.value===!0?"dark":"light"} q-skeleton--type-${a.type}`+(a.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${a.animation}`:"")+(a.square===!0?" q-skeleton--square":"")+(a.bordered===!0?" q-skeleton--bordered":""));return()=>s(a.tag,{class:m.value,style:k.value},Ke(i.default))}});const ia={name:"Chart",props:{data:{type:Object},loading:{type:Boolean},dates:{type:Object},coinName:{type:String}},watch:{data(a,i){a&&this.prepareDataForPlotly(a)}},methods:{prepareDataForPlotly(a={}){const i=Object.keys(a),u={prices:{value:[],date:[]},market_caps:{value:[],date:[]}};i.forEach(f=>{if(f in u)for(let g=0;g<a[f].length;g++){const D=new Date(a[f][g][0]);u[f].value.push(a[f][g][1]),u[f].date.push(ne.formatDate(D.getTime(),"YYYY-MM-DD"))}}),console.log(u);const k=[{type:"scatter",mode:"lines",name:"Prices",x:u.prices.date,y:u.prices.value,line:{color:"#17BECF"}}],m={legend:{x:0,y:-.6},title:`Chart with prices of ${this.coinName}`,xaxis:{autorange:!0,rangeselector:{buttons:[{count:1,label:"1m",step:"month",stepmode:"backward"},{count:6,label:"6m",step:"month",stepmode:"backward"},{step:"all"}]},type:"date"},yaxis:{autorange:!0,type:"linear"}};Plotly.newPlot(this.$refs.graphic||"graphic",k,m,{displaylogo:!1,responsive:!0})}}},sa={class:"chart"},ua={class:"chart__graphic-wrapper"},ca={ref:"graphic",id:"graphic"};function da(a,i,u,M,k,m){return qe(),Te("div",sa,[W("div",ua,[W("div",ca,null,512)]),q(N,{name:"router",mode:"in-out"},{default:F(()=>[tt(q(ra,{class:"chart__skeleton","animation-speed":"500"},null,512),[[at,u.loading]])]),_:1})])}var va=et(ia,[["render",da],["__scopeId","data-v-0c1f6aed"]]);const ma="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAG1BMVEXMzMyWlpaqqqq3t7fFxcW+vr6xsbGjo6OcnJyLKnDGAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABAElEQVRoge3SMW+DMBiE4YsxJqMJtHOTITPeOsLQnaodGImEUMZEkZhRUqn92f0MaTubtfeMh/QGHANEREREREREREREtIJJ0xbH299kp8l8FaGtLdTQ19HjofxZlJ0m1+eBKZcikd9PWtXC5DoDotRO04B9YOvFIXmXLy2jEbiqE6Df7DTleA5socLqvEFVxtJyrpZFWz/pHM2CVte0lS8g2eDe6prOyqPglhzROL+Xye4tmT4WvRcQ2/m81p+/rdguOi8Hc5L/8Qk4vhZzy08DduGt9eVQyP2qoTM1zi0/uf4hvBWf5c77e69Gf798y08L7j0RERERERERERH9P99ZpSVRivB/rgAAAABJRU5ErkJggg==",ha=13100,fa={name:"SpecialCoin",components:{CustomTable:Ut,CustomChart:va},data(){return{logoPlaceholder:ma}},computed:{getLikedCoinsIds(){return this.$store.getters.getLikedCoinsIds||[]},getLikedCoins(){return this.$store.getters.getLikedCoins||[]},getMainCoinsGeckoTableConfig(){return this.$store.getters["specialCoin/getMainCoinsGeckoTableConfig"]},getCoinsGecko(){return this.$store.getters.getCoinsGecko||[]},getCoinsGeckoSmall(){return(this.$store.getters.getCoinsGecko||[]).slice(0,4)},getCoinsGeckoLoading(){return this.$store.getters.getCoinsGeckoLoading||!1},getCoinsGeckoError(){return this.$store.getters.getCoinsGeckoError},bigTablePagesCount(){return Math.floor(ha/this.getMainCoinsGeckoTableConfig.rowsPerPage.value)},getCoinGecko(){return this.$store.getters.getCoinGecko||{}},getCoinGeckoLoading(){return this.$store.getters.getCoinGeckoLoading||!1},getCoinGeckoError(){return this.$store.getters.getCoinGeckoError},getChartLoading(){return this.$store.getters["specialCoin/getChartLoading"]},getChartData(){return this.$store.getters["specialCoin/getChartData"]},getChartError(){return this.$store.getters["specialCoin/getChartError"]},getChartDates(){const{value:{from:a,to:i}}=this.$store.getters["specialCoin/getChartDates"],u=ne.formatDate(a.getTime(),"YYYY-MM-DD"),M=ne.formatDate(i.getTime(),"YYYY-MM-DD");return{from:u,to:M}},coinId(){return(this.$route.params||{}).id}},watch:{"getMainCoinsGeckoTableConfig.timeRange.value"(a){this.currentPage=1,this.loadCoinsMarket()},"getMainCoinsGeckoTableConfig.rowsPerPage.value"(a){this.loadCoinsMarket()},"getMainCoinsGeckoTableConfig.currentPage"(a){this.loadCoinsMarket()},coinId(a){a&&this.initial()}},created(){this.loadGraphicData=Vt(this.loadGraphicData,1e3),this.initial()},methods:{twoWayBindingsHandler({event:a,name:i,table:u}){this.$store.dispatch("specialCoin/updateValue",{event:a,name:i,table:u})},loadCoinsMarket(){return this.$store.dispatch("loadCoinsMarket",{params:R(h({},!!this.getMainCoinsGeckoTableConfig.timeRange.value&&{price_change_percentage:this.getMainCoinsGeckoTableConfig.timeRange.value}),{page:this.getMainCoinsGeckoTableConfig.currentPage,per_page:this.getMainCoinsGeckoTableConfig.rowsPerPage.value,price_change_percentage:this.getMainCoinsGeckoTableConfig.timeRange.value})})},updateLikedCoins(a){this.$store.dispatch("updateLikedCoins",{coin:a})},updateChartDates(a){if(a){const{from:i,to:u}=a,M={from:ne.extractDate(i,"YYYY-MM-DD"),to:ne.extractDate(u,"YYYY-MM-DD")};this.$store.commit("specialCoin/SET_CHART_DATES",{chartDates:M}),this.loadGraphicData()}},initial(){this.loadCoinById().then(()=>this.loadGraphicData()).then(()=>{this.loadCoinsMarket()})},loadCoinById(){return this.$store.dispatch("loadCoinById",{id:this.coinId,params:{}})},loadGraphicData(){return this.$store.dispatch("specialCoin/loadCoinChartData",{id:this.coinId})}}},ga={class:"special-coin"},ya={class:"special-coin__loader"},Ca={class:"special-coin__content"},_a={key:0},ba={class:"special-coin__title-wrapper"},ka={class:"special-coin__title-text"},Da={class:"special-coin__chart-wrapper"};function Ma(a,i,u,M,k,m){const f=Ue("custom-chart"),g=Ue("custom-table");return qe(),Te("div",ga,[q(G,{label:"Back to Dashboard",type:"button",color:"primary",onClick:i[0]||(i[0]=D=>a.$router.push({name:"Dashboard"}))}),q(N,{name:"router",mode:"in-out"},{default:F(()=>[tt(W("div",ya,[q(Et,{showing:""},{default:F(()=>[q(Bt,{size:"50px",color:"primary"})]),_:1})],512),[[at,m.getCoinGeckoLoading]])]),_:1}),W("div",Ca,[m.getCoinGecko.id?(qe(),Te("div",_a,[W("div",ba,[q(Rt,{class:"special-coin__title-image",src:m.getCoinGecko.image.large,alt:m.getCoinGecko.name+" image","logo-placeholder":k.logoPlaceholder,"spinner-color":"white"},null,8,["src","alt","logo-placeholder"]),W("h1",ka,It(m.getCoinGecko.name),1)])])):Ot("",!0),W("div",Da,[q($t,{class:"special-coin__chart-card"},{default:F(()=>[q(Qt,null,{default:F(()=>[q(G,{icon:"event",color:"primary",label:"Choose date range",class:"special-coin__chart-date-range"},{default:F(()=>[q(na,{cover:"","transition-show":"scale","transition-hide":"scale",ref:"popupChartDateRange"},{default:F(()=>[q(aa,{range:"","no-unset":"",mask:"YYYY-MM-DD","model-value":m.getChartDates,"onUpdate:modelValue":i[1]||(i[1]=D=>(m.updateChartDates(D),this.$refs.popupChartDateRange.hide()))},null,8,["model-value"])]),_:1},512)]),_:1}),q(f,{data:m.getChartData,loading:m.getChartLoading,error:m.getChartError,dates:m.getChartDates,"coin-name":m.getCoinGecko.name},null,8,["data","loading","error","dates","coin-name"])]),_:1})]),_:1})]),q(g,{type:"big",coins:m.getCoinsGecko,columns:m.getMainCoinsGeckoTableConfig.columns,loading:m.getCoinsGeckoLoading,"time-range":m.getMainCoinsGeckoTableConfig.timeRange,"rows-per-page":m.getMainCoinsGeckoTableConfig.rowsPerPage,"visible-columns":m.getMainCoinsGeckoTableConfig.visibleColumns,"current-page":m.getMainCoinsGeckoTableConfig.currentPage,"liked-coins-ids":m.getLikedCoinsIds,"max-page":m.bigTablePagesCount,"onUpdate:currentPage":i[2]||(i[2]=D=>m.twoWayBindingsHandler({event:D,name:"currentPage",table:"mainCoinsTable"})),"onUpdate:timeRange":i[3]||(i[3]=D=>m.twoWayBindingsHandler({event:D,name:"timeRange",table:"mainCoinsTable"})),"onUpdate:visibleColumns":i[4]||(i[4]=D=>m.twoWayBindingsHandler({event:D,name:"visibleColumns",table:"mainCoinsTable"})),"onUpdate:likedCoinsIds":m.updateLikedCoins},null,8,["coins","columns","loading","time-range","rows-per-page","visible-columns","current-page","liked-coins-ids","max-page","onUpdate:likedCoinsIds"])])])}var Ya=et(fa,[["render",Ma],["__scopeId","data-v-97d76590"]]);export{Ya as default};
