var w=Object.defineProperty,R=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var h=(e,a,t)=>a in e?w(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,d=(e,a)=>{for(var t in a||(a={}))P.call(a,t)&&h(e,t,a[t]);if(p)for(var t of p(a))L.call(a,t)&&h(e,t,a[t]);return e},g=(e,a)=>R(e,G(a));import{c as E,u as x,a as q,i as B,_ as S,o as I,a0 as Q,a1 as M,q as T}from"./index.c74345e2.js";import{b as k,h as D,g as z,m as u,D as O,x as _,I as b,p as n,z as m,w as v,L as y,A as l,T as C,P as V,M as J}from"./quasar.c7fe1536.js";import{T as N}from"./Table.4242bf23.js";import"./QSelect.5a6812ee.js";import"./QInput.a6e2b53c.js";const W=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],H=["wave","pulse","pulse-x","pulse-y","fade","blink","none"];var U=E({name:"QSkeleton",props:g(d({},x),{tag:{type:String,default:"div"},type:{type:String,validator:e=>W.includes(e),default:"rect"},animation:{type:String,validator:e=>H.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String}),setup(e,{slots:a}){const t=z(),c=q(e,t.proxy.$q),i=k(()=>{const r=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:r[0],height:r[1]}}),o=k(()=>`q-skeleton q-skeleton--${c.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>D(e.tag,{class:o.value,style:i.value},B(a.default))}});const X="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAAAG1BMVEXMzMyWlpaqqqq3t7fFxcW+vr6xsbGjo6OcnJyLKnDGAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABAElEQVRoge3SMW+DMBiE4YsxJqMJtHOTITPeOsLQnaodGImEUMZEkZhRUqn92f0MaTubtfeMh/QGHANEREREREREREREtIJJ0xbH299kp8l8FaGtLdTQ19HjofxZlJ0m1+eBKZcikd9PWtXC5DoDotRO04B9YOvFIXmXLy2jEbiqE6Df7DTleA5socLqvEFVxtJyrpZFWz/pHM2CVte0lS8g2eDe6prOyqPglhzROL+Xye4tmT4WvRcQ2/m81p+/rdguOi8Hc5L/8Qk4vhZzy08DduGt9eVQyP2qoTM1zi0/uf4hvBWf5c77e69Gf798y08L7j0RERERERERERH9P99ZpSVRivB/rgAAAABJRU5ErkJggg==",Z=13100,$={name:"SpecialCoin",components:{TableBig:N},data(){return{logoPlaceholder:X,graphicLoading:!0,columns:u([{name:"image",label:"Logo",required:!0},{name:"name",label:"Name",format:e=>e,field:e=>e.name,sortable:{handler:(e,a)=>e.name.localeCompare(a.name)}},{name:"current_price",label:"Current Price",format:e=>e,field:e=>e.current_price,sortable:{handler:(e,a)=>e.current_price-a.current_price}},{name:"symbol",label:"Symbol",format:e=>e,field:e=>e.symbol,sortable:{handler:(e,a)=>e.symbol-a.symbol}},{name:"price_change_percentage_24h",label:"Price Change (24h)",format:e=>e+"%",field:e=>e.price_change_percentage_24h,sortable:{handler:(e,a)=>e.price_change_percentage_24h-a.price_change_percentage_24h}},{name:"market_cap",label:"Market Cap",format:e=>e+"%",field:e=>e.market_cap,sortable:{handler:(e,a)=>e.market_cap-a.market_cap}},{name:"likes",label:"Like",format:e=>e,field:e=>"",sortable:{handler:(e,a)=>!this.bigTable.likedRowIds||!this.bigTable.likedRowIds.length?0:(this.likedRowIds||[]).includes(e.id)?1:-1}},{name:"pageLink",label:"",required:!0}]),visibleColumns:["current_price","name","price_change_percentage_24h","likes","market_cap","symbol"],likedRowIds:[],currentPage:1,rowsPerPage:{value:25,options:u([{value:25,label:"25"},{value:50,label:"50"},{value:100,label:"100"},{value:150,label:"150"},{value:200,label:"200"}])},timeRange:{value:"24h",options:u([{value:"1h",label:"1 hour"},{value:"24h",label:"24 hours"},{value:"7d",label:"7 days"},{value:"14d",label:"14 days"},{value:"30d",label:"30 days"},{value:"200d",label:"200 days"},{value:"1y",label:"1 year"}])}}},computed:{getCoinsGecko(){return this.$store.getters.getCoinsGecko||[]},getCoinsGeckoLoading(){return this.$store.getters.getCoinsGeckoLoading||!1},getCoinsGeckoError(){return this.$store.getters.getCoinsGeckoError},bigTablePagesCount(){return Math.floor(Z/this.rowsPerPage.value)},getCoinGecko(){return this.$store.getters.getCoinGecko||{}},getCoinGeckoLoading(){return this.$store.getters.getCoinGeckoLoading||!1},getCoinGeckoError(){return this.$store.getters.getCoinGeckoError},coinId(){return(this.$route.params||{}).id}},watch:{"timeRange.value"(e){this.currentPage=1,this.loadCoinsMarket()},"rowsPerPage.value"(e){this.loadCoinsMarket()},currentPage(e){this.loadCoinsMarket()},coinId(e){e&&this.initial()}},created(){this.initial()},methods:{initial(){this.loadCoinById().then(()=>this.loadGraphicData()).then(()=>{this.loadCoinsMarket()})},loadCoinById(){return this.$store.dispatch("loadCoinById",{id:this.coinId,params:{}})},loadGraphicData(){this.graphicLoading=!0,Plotly.d3.csv("https://raw.githubusercontent.com/plotly/datasets/master/finance-charts-apple.csv",(e,a)=>{function t(s,f){return s.map(function(A){return A[f]})}const c={type:"scatter",mode:"lines",name:`${this.getCoinGecko.name} price`,x:t(a,"Date"),y:t(a,"AAPL.High"),line:{color:"#17BECF"}},i={type:"scatter",mode:"lines",name:`${this.getCoinGecko.name} mentions (indexed)`,x:t(a,"Date"),y:t(a,"AAPL.Low"),line:{color:"#3e5c50"}},o=[c,i],r={legend:{x:0,y:-.6},title:`${this.getCoinGecko.name} development`,xaxis:{autorange:!0,range:["2015-02-17","2017-02-16"],rangeselector:{buttons:[{count:1,label:"1m",step:"month",stepmode:"backward"},{count:6,label:"6m",step:"month",stepmode:"backward"},{step:"all"}]},rangeslider:{range:["2015-02-17","2017-02-16"]},type:"date"},yaxis:{autorange:!0,range:[86.8700008333,138.870004167],type:"linear"}};setTimeout(()=>{Plotly.newPlot(this.$refs.graphic||"graphic",o,r,{displaylogo:!1,responsive:!0}),this.$nextTick(()=>{this.graphicLoading=!1})},1e3)})},loadCoinsMarket(){return this.$store.dispatch("loadCoinsMarket",{params:g(d({},!!this.timeRange.value&&{price_change_percentage:this.timeRange.value}),{page:this.currentPage,per_page:this.rowsPerPage.value,price_change_percentage:this.timeRange.value})})}}},F={class:"special-coin"},j={class:"special-coin__loader"},K={class:"special-coin__content"},Y={key:0},ee={class:"special-coin__title-wrapper"},ae={class:"special-coin__title-text"},te={class:"special-coin__graphic-wrapper"},ie={ref:"graphic",id:"graphic",class:"special-coin__graphic"};function oe(e,a,t,c,i,o){const r=O("table-big");return _(),b("div",F,[n(I,{label:"Back to Dashboard",type:"button",color:"primary",onClick:a[0]||(a[0]=s=>e.$router.push({name:"Dashboard"}))}),n(C,{name:"router",mode:"in-out"},{default:m(()=>[v(l("div",j,[n(Q,{showing:""},{default:m(()=>[n(M,{size:"50px",color:"primary"})]),_:1})],512),[[y,o.getCoinGeckoLoading]])]),_:1}),l("div",K,[o.getCoinGecko.id?(_(),b("div",Y,[l("div",ee,[n(T,{class:"special-coin__title-image",src:o.getCoinGecko.image.large,alt:o.getCoinGecko.name+" image","logo-placeholder":i.logoPlaceholder,"spinner-color":"white"},null,8,["src","alt","logo-placeholder"]),l("h1",ae,V(o.getCoinGecko.name),1)])])):J("",!0),l("div",te,[l("div",ie,null,512),n(C,{name:"router",mode:"in-out"},{default:m(()=>[v(n(U,{class:"special-coin__graphic-skeleton","animation-speed":"500"},null,512),[[y,i.graphicLoading]])]),_:1})]),n(r,{coins:o.getCoinsGecko,columns:i.columns,loading:o.getCoinsGeckoLoading,"time-range":i.timeRange,"rows-per-page":i.rowsPerPage,"visible-columns":i.visibleColumns,"current-page":i.currentPage,"onUpdate:current-page":a[1]||(a[1]=s=>i.currentPage=s),"liked-row-ids":i.likedRowIds,"onUpdate:liked-row-ids":a[2]||(a[2]=s=>i.likedRowIds=s),"max-page":o.bigTablePagesCount,type:"big"},null,8,["coins","columns","loading","time-range","rows-per-page","visible-columns","current-page","liked-row-ids","max-page"])])])}var ge=S($,[["render",oe],["__scopeId","data-v-77605d51"]]);export{ge as default};
